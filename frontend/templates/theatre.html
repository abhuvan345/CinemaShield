{% extends "base.html" %} {% block title %}Theatre â€” CinemaShield{% endblock %}
{% block content %}
<section class="page-header">
  <h1>ğŸ­ Theatre Player</h1>
  <p>
    Enter the decryption key provided by the producer to begin secure playback.
  </p>
</section>

<!-- â”€â”€ Status Banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="status-banner" class="banner banner-info hidden">
  <span id="status-text"></span>
</div>

<!-- â”€â”€ Auth Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="auth-section" class="card">
  <h2>ğŸ” Authentication</h2>
  <form id="auth-form">
    <label for="key-input">Decryption Key</label>
    <div class="input-row">
      <input
        type="text"
        id="key-input"
        placeholder="Paste the Fernet key here..."
        autocomplete="off"
        spellcheck="false"
        required
      />
      <button type="submit" class="btn btn-primary" id="auth-btn">
        Unlock &amp; Play
      </button>
    </div>
  </form>
  <div id="auth-error" class="error-msg hidden"></div>
  <div id="auth-loading" class="loading hidden">
    <div class="spinner"></div>
    <span>Decrypting and preparing secure stream...</span>
  </div>
</div>

<!-- â”€â”€ Player Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="player-section" class="card hidden">
  <div class="player-header">
    <h2>â–¶ Now Playing</h2>
    <div class="player-controls-row">
      <div class="player-meta">
        <span>ğŸ§© <span id="info-shards"></span> shards</span>
        <span>ğŸ› <span id="info-theatre"></span></span>
        <span id="time-badge" class="time-badge">â± <span id="info-time"></span></span>
      </div>
      <button id="fullscreen-btn" class="btn btn-sm btn-outline" title="Cinema Mode">â›¶ Cinema</button>
    </div>
  </div>

  <!-- Expiry warning -->
  <div id="expiry-warning" class="banner banner-warn hidden">
    âš  Playback window ending soon! Video will stop automatically.
  </div>

  <div class="video-container drm-protected" id="video-container">
    <video id="video-player" controls autoplay>
      Your browser does not support HTML5 video.
    </video>
    <!-- DRM watermark overlay -->
    <div class="drm-watermark" id="drm-watermark"></div>
  </div>
  <div class="player-footer">
    <p class="text-muted">ğŸ”’ Decrypted in memory &mdash; no plaintext file stored on disk.</p>
    <p class="text-muted drm-notice">Screen capture &amp; right-click disabled. DRM watermark active.</p>
  </div>
</div>

<!-- â”€â”€ Expired overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="expired-overlay" class="expired-overlay hidden">
  <div class="expired-content">
    <div class="expired-icon">â±</div>
    <h2>Playback Window Expired</h2>
    <p>The authorised playback time has ended. Contact the producer for a new session.</p>
    <a href="/theatre" class="btn btn-primary">Back to Theatre</a>
  </div>
</div>

{% endblock %} {% block scripts %}
<script src="{{ url_for('static', filename='js/theatre.js') }}"></script>
{% endblock %}
